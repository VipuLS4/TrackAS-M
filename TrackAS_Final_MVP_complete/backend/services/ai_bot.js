import { query } from '../db.js';
export function getFAQsByRole(role){ const en={ company:[{id:'create_shipment', q_en:'How to create shipment?', q_hi:'शिपमेंट कैसे बनाएं?'}], driver:[{id:'accept_shipment', q_en:'How to accept shipment?', q_hi:'शिपमेंट कैसे स्वीकार करें?'}], admin:[{id:'pending_approvals', q_en:'Pending approvals', q_hi:'लंबित अनुमोदन'}], customer:[{id:'where_shipment', q_en:'Where is my shipment?', q_hi:'मेरी शिपमेंट कहाँ है?'}] }; return en[role]||en.customer; }
export async function handleMessage(from, text){ if (!text) return 'Please send your question.'; if (/where|track|status/i.test(text)){ const id=(text.match(/[A-F0-9-]{6,36}/i)||[null])[0]; if (!id) return 'Please provide shipment id.'; const r=await query('SELECT id,status,operator_id FROM shipments WHERE id=$1',[id]); if (!r.rows.length) return 'Shipment not found.'; const s=r.rows[0]; return `Shipment ${s.id} status: ${s.status}.`; } return 'TrackAS assistant here. For support, type "support".'; }
